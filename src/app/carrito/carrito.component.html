<main>
    <div class="container">
        <div class="row mt-3">
            <div class="col">
                <h2 class="d-flex justify-content-center mb-3">Realizar Compra</h2>
                <form (submit)="procesarCompra()">
                    <div class="form-group row">
                        <label for="cliente" class="col-12 col-md-2 col-form-label h2">Cliente :</label>
                        <div class="col-12 col-md-10">
                            <input type="text" class="form-control" id="cliente" [(ngModel)]="cliente"
                                placeholder="Ingresa nombre cliente" name="destinatario" maxlength="25">
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="correo" class="col-12 col-md-2 col-form-label h2">Correo :</label>
                        <div class="col-12 col-md-10">
                            <input type="email" class="form-control" id="correo" [(ngModel)]="correo"
                                placeholder="Ingresa tu correo" name="cc_to"
                                pattern="[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}$" required maxlength="50">
                            <div class="invalid-feedback">
                                Por favor ingresa un correo electrónico válido.
                            </div>
                        </div>
                    </div>

                    <div id="carrito" class="form-group table-responsive">
                        <div class="table-responsive">
                            <table class="table table-hover table-sm">
                                <thead>
                                    <tr>
                                        <th scope="col">Imagen</th>
                                        <th scope="col">Nombre</th>
                                        <th scope="col">Precio</th>
                                        <th scope="col">Cantidad</th>
                                        <th scope="col">Sub Total</th>
                                        <th scope="col">Eliminar</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr *ngFor="let item of carrito; let i = index">
                                        <td><img [src]="item.imagen" alt="{{item.nombre}}" width="50"></td>
                                        <td>{{item.nombre}}</td>
                                        <td>{{item.precio | currency}}</td>
                                        <td>{{item.cantidad}}</td>
                                        <td>{{item.precio * item.cantidad | currency}}</td>
                                        <td><button type="button" class="btn btn-danger btn-sm"
                                                (click)="eliminarProducto(i)">Eliminar</button></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="row">
                            <div class="col-12 col-md-8 offset-md-4">
                                <table class="table">
                                    <tr>
                                        <th scope="col" colspan="4" class="text-right">SUB TOTAL :</th>
                                        <th scope="col">
                                            <p>{{subtotal | currency}}</p>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th scope="col" colspan="4" class="text-right">IVA :</th>
                                        <th scope="col">
                                            <p>{{iva | currency}}</p>
                                        </th>
                                    </tr>
                                    <tr>
                                        <th scope="col" colspan="4" class="text-right">TOTAL :</th>
                                        <th scope="col">
                                            <p class="font-weight-bold border-0" readonly
                                                style="background-color: white;">{{total | currency}}</p>
                                        </th>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>

                    <div class="row justify-content-between">
                        <div class="col-12 col-md-4 mb-2">
                            <a href="/service" class="btn btn-info btn-block">Seguir comprando</a>
                        </div>
                        <div class="col-12 col-md-4">
                            <input type="submit" class="btn btn-success btn-block" value="Realizar compra">
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>
